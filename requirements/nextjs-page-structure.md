# Next.jsページ構成設計書

## 1. プロジェクト構造

### 1.1 ディレクトリ構成
```
project-root/
├── app/                      # App Routerディレクトリ
│   ├── (auth)/              # 認証関連ページグループ
│   │   ├── login/
│   │   ├── register/
│   │   └── reset-password/
│   ├── (dashboard)/        # ダッシュボードレイアウトグループ
│   │   ├── layout.tsx
│   │   ├── page.tsx        # メインダッシュボード
│   │   ├── tasks/
│   │   ├── projects/
│   │   ├── customers/
│   │   ├── inventory/
│   │   ├── billing/
│   │   ├── reports/
│   │   └── settings/
│   ├── (public)/           # 公開ページグループ
│   │   ├── page.tsx        # ランディングページ
│   │   ├── about/
│   │   ├── pricing/
│   │   └── contact/
│   ├── api/                # API Routes
│   │   ├── auth/
│   │   ├── users/
│   │   ├── tasks/
│   │   ├── projects/
│   │   ├── customers/
│   │   └── webhooks/
│   ├── layout.tsx          # ルートレイアウト
│   ├── globals.css
│   └── providers.tsx
├── components/              # 共通コンポーネント
│   ├── ui/                 # UIコンポーネント
│   ├── forms/              # フォームコンポーネント
│   ├── charts/             # グラフコンポーネント
│   └── layouts/            # レイアウトコンポーネント
├── lib/                     # ユーティリティ
├── hooks/                   # カスタムフック
├── types/                   # TypeScript型定義
├── public/                  # 静的アセット
└── tests/                   # テストファイル
```

## 2. ページ構成詳細

### 2.1 公開ページ

#### ランディングページ (/)
- **目的**: サービスの紹介とコンバージョン
- **コンポーネント**:
  - Heroセクション
  - 機能紹介
  - 価格プラン
  - お客様の声
  - CTAセクション

#### 価格ページ (/pricing)
- **目的**: プランの詳細と比較
- **コンポーネント**:
  - プラン比較表
  - FAQセクション
  - 申し込みボタン

### 2.2 認証ページ

#### ログインページ (/login)
- **機能**:
  - メール/パスワードログイン
  - ソーシャルログイン
  - 2FA認証
  - パスワードリセットリンク

#### 新規登録ページ (/register)
- **機能**:
  - アカウント作成フォーム
  - メール確認
  - 利用規約同意
  - オンボーディングフロー

### 2.3 ダッシュボードページ

#### メインダッシュボード (/dashboard)
- **コンポーネント**:
  - KPIウィジェット
  - タスクサマリー
  - カレンダーウィジェット
  - 通知パネル
  - クイックアクセス

#### タスク管理 (/dashboard/tasks)
- **表示モード**:
  - カンバンボードビュー
  - リストビュー
  - ガントチャートビュー
  - カレンダービュー
- **機能**:
  - タスク作成/編集
  - フィルタリング
  - ソート
  - 一括操作

#### 顧客管理 (/dashboard/customers)
- **ページ構成**:
  - 顧客一覧
  - 顧客詳細
  - 新規顧客登録
  - 顧客インポート
- **機能**:
  - 検索/フィルター
  - セグメント管理
  - タグ付け
  - 履歴表示

#### 在庫管理 (/dashboard/inventory)
- **ページ構成**:
  - 在庫一覧
  - 商品詳細
  - 入出庫履歴
  - 在庫レポート
- **機能**:
  - バーコードスキャン
  - 在庫アラート
  - 一括更新
  - CSVインポート/エクスポート

#### 請求管理 (/dashboard/billing)
- **ページ構成**:
  - 請求書一覧
  - 請求書作成
  - 支払い状況
  - 経費精算
- **機能**:
  - PDF出力
  - メール送信
  - 自動催促
  - 会計システム連携

#### レポート (/dashboard/reports)
- **レポート種類**:
  - 売上レポート
  - タスク分析
  - 顧客分析
  - 在庫レポート
  - カスタムレポート
- **機能**:
  - フィルター設定
  - グラフ表示
  - エクスポート
  - スケジュール配信

#### 設定 (/dashboard/settings)
- **セクション**:
  - プロフィール設定
  - アカウント設定
  - 通知設定
  - チーム管理
  - システム設定
  - APIキー管理
  - 請求設定

## 3. ルーティング設計

### 3.1 パスパラメータ
```typescript
// 動的ルートの例
/dashboard/tasks/[taskId]      // タスク詳細
/dashboard/projects/[projectId] // プロジェクト詳細
/dashboard/customers/[customerId] // 顧客詳細
```

### 3.2 クエリパラメータ
```typescript
// フィルタリングとページネーション
/dashboard/tasks?status=pending&page=1
/dashboard/customers?segment=vip&sort=created_desc
/dashboard/reports?type=sales&period=monthly
```

### 3.3 ミドルウェア
```typescript
// 認証ミドルウェア
middleware.ts
- パブリックページ: アクセス許可
- 認証ページ: ログイン済みの場合リダイレクト
- ダッシュボード: 認証必須
- API: トークン検証
```

## 4. レイアウト設計

### 4.1 ルートレイアウト
- ヘッダー（公開ページのみ）
- メインコンテンツ
- フッター（公開ページのみ）

### 4.2 ダッシュボードレイアウト
- サイドバー（ナビゲーション）
- トップバー（検索、通知、プロフィール）
- メインコンテンツエリア
- ブレッドクラム

### 4.3 モバイルレイアウト
- ハンバーガーメニュー
- ボトムナビゲーション
- スワイプ対応コンポーネント

## 5. データフェッチング戦略

### 5.1 サーバーサイドレンダリング (SSR)
- ダッシュボードページ
- レポートページ
- 詳細ページ

### 5.2 静的生成 (SSG)
- ランディングページ
- 価格ページ
- 会社情報ページ

### 5.3 クライアントサイドフェッチ
- リアルタイムデータ
- ユーザーインタラクション
- 無限スクロール

## 6. パフォーマンス最適化

### 6.1 コード分割
- ルートセグメント単位での分割
- 動的インポート
- 遅延ローディング

### 6.2 画像最適化
- Next.js Imageコンポーネント
- WebP自動変換
- レスポンシブ画像

### 6.3 キャッシュ戦略
- 静的アセット: 長期キャッシュ
- APIレスポンス: 適切なキャッシュヘッダー
- ISR（Incremental Static Regeneration）

## 7. SEO対策

### 7.1 メタデータ
- 動的タイトル生成
- Open Graphタグ
- Twitter Card
- 構造化データ

### 7.2 サイトマップ
- 動的sitemap.xml生成
- robots.txt設定

### 7.3 URL構造
- SEOフレンドリーURL
- パンくずリストの実装
- canonical URLの設定