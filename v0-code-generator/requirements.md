# AI LP Generator - 要件定義書

## 1. プロジェクト概要

PASONAの法則（Problem, Affinity, Solution, Offer, Narrowing down, Action）に基づいたヒアリングフォームを通じて、ユーザーのビジネスに最適化された高コンバージョンLPをAIで自動生成する、SaaS型Webアプリケーション。ユーザーはアカウントを作成し、生成したLPプロジェクトを永続的に管理できる。

## 2. 主要機能要件

### 2.1. ユーザー認証機能 (Supabase)

**目的**: ユーザーごとにプロジェクトを安全に管理する。

**仕様**:
- Supabase Authenticationを全面的に採用する
- メールアドレスとパスワードによるサインアップ及びログイン機能
- Googleアカウントを利用したソーシャルログイン（ワンクリックログイン）機能
- セキュアなログアウト機能及びセッション管理

### 2.2. PASONAヒアリングフォーム機能

**目的**: LP生成の元となる、質の高い情報をユーザーから引き出す。

**仕様**:
- 画面左側に、以下の各項目に対応した入力フォームを配置する
  - **Problem (問題提起)**: 顧客が抱える悩みや痛みは何か？
  - **Affinity (親近感)**: その痛みに寄り添い、共感を示すメッセージは？
  - **Solution (解決策)**: その問題を具体的にどう解決するのか？
  - **Offer (提案)**: 商品やサービスの具体的な内容、価格、特典は？
  - **Narrowing down (絞込)**: なぜ「今」買うべきなのか？（限定性、緊急性）
  - **Action (行動)**: 顧客に取ってほしい最終的な行動は？（購入、登録など）
- 各フォームには、ユーザーが入力を迷わないよう、具体的な質問や記入例をガイドとして表示する

### 2.3. LP自動生成 & 自動プレビュー機能

**目的**: フォーム入力からシームレスに完成形LPを提示する。

**仕様**:
- フォーム入力後、「LPを生成する」ボタンを押下する
- バックエンドは、PASONAの6つの要素を統合し、V0 APIに最適化された一つの詳細なプロンプトを生成して、既存の「自動生成エンジン」を起動する
- 処理が完了次第、画面右側のプレビュー領域が自動的にリロードされ、完成したLPが表示される

### 2.4. プロジェクト管理ダッシュボード機能

**目的**: ユーザーが自身の資産（LP）を管理・活用できるようにする。

**仕様**:
- ログイン後、ユーザーが過去に作成した全プロジェクトを一覧表示する
- 各プロジェクトカードには、プロジェクト名、作成日時、サムネイル画像（任意）を表示する
- 各プロジェクトに対して、以下の操作を可能にする
  - **再編集**: PASONAフォームに過去の入力内容を読み込み、再生成できる
  - **プレビュー**: 生成されたLPを直接表示する
  - **削除**: プロジェクトをデータベースから削除する

## 3. 技術アーキテクチャ

- **フロントエンド**: Next.js (App Router), React, Tailwind CSS
- **バックエンドAPI**: Next.js API Routes
- **コアエンジン**: CLI版で完成させたNode.jsスクリプト群（API経由で実行）
- **データベース & 認証**: Supabase
- **AI**: Vercel V0 Model API

## 4. データベース設計案 (Supabase)

### usersテーブル
- Supabase Authが自動管理

### projectsテーブル (新規作成)
- `id` (uuid, 主キー)
- `user_id` (uuid, usersテーブルへの外部キー)
- `created_at` (timestampz)
- `project_name` (text, ユーザーが命名)
- `pasona_problem` (text)
- `pasona_affinity` (text)
- `pasona_solution` (text)
- `pasona_offer` (text)
- `pasona_narrowing_down` (text)
- `pasona_action` (text)
- `generated_project_path` (text, サーバー上の物理パス)
- `preview_url` (text, プレビュー用の一意なURL)

## 5. 開発タスク分割案 (for Boss & Workers)

Bossは以下の分割案を参考に、各Workerのスキルと負荷を考慮し、最適なタスク割り当てとスケジュール管理を行ってほしい。

### 担当: Worker 1 (認証・DBのスペシャリスト)
- SupabaseプロジェクトのセットアップとNext.jsアプリとの接続
- projectsテーブルのスキーマ設計と構築
- サインアップ、ログイン、ログアウト画面のUIとロジックの実装

### 担当: Worker 2 (UI/UXのアーティスト)
- PASONAヒアリングフォームのUIコンポーネント作成（ガイド機能を含む）
- プロジェクト管理ダッシュボードのUI/UXデザインと実装
- アプリケーション全体のスタイリングとレスポンシブ対応

### 担当: Worker 3 (バックエンド・APIの魔術師)
- 既存のコアエンジンを、Next.js API Routesから安全に呼び出せるようにリファクタリング
- `/api/generate` エンドポイントの作成（フォームデータ受付、プロンプト生成、エンジン起動）
- Supabaseへのプロジェクトデータ保存・読込ロジックの実装

---

**チーム一丸となり、この設計図に命を吹き込んでくれ。健闘を祈る。**